# FinShark.API

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–∫—Ü–∏—è–º–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏ —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CRUD –æ–ø–µ—Ä–∞—Ü–∏–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: .NET 8.0
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: ASP.NET Core, C# 12.0, Razor ASP.NET Core
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: MVC —Å Repository Pattern
- **API Versioning**: v1.0
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: JWT/Identity
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

1. **Stock** - –∞–∫—Ü–∏–∏/—Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏
   - Symbol, CompanyName, Purchase, LastDiv, Industry, MarketCap

2. **Comment** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∞–∫—Ü–∏—è–º
   - –°–≤—è–∑—å —Å User –∏ Stock

3. **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (IdentityUser)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

4. **Portfolio** - –ø–æ—Ä—Ç—Ñ–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - Many-to-Many —Å–≤—è–∑—å –º–µ–∂–¥—É User –∏ Stock

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

```
User (1) ‚Üê‚Üí (‚àû) Portfolio (‚àû) ‚Üê‚Üí (1) Stock
  ‚Üì                                    ‚Üì
  (1)                                  (1)
  ‚Üì                                    ‚Üì
  (‚àû) Comment (‚àû) ‚Üê‚Üí (1) Stock
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- **User ‚Üî Portfolio**: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π –ø–æ—Ä—Ç—Ñ–µ–ª—è
- **Stock ‚Üî Portfolio**: –æ–¥–Ω–∞ –∞–∫—Ü–∏—è ‚Üí –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **User ‚Üî Comment**: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤  
- **Stock ‚Üî Comment**: –æ–¥–Ω–∞ –∞–∫—Ü–∏—è ‚Üí –º–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## üöÄ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê–∫—Ü–∏–∏ `/api/v1/stocks`
- `GET /` - —Å–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π (—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- `GET /{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ü–∏–∏ –ø–æ ID
- `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞–∫—Ü–∏–∏
- `PUT /{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ü–∏–∏
- `DELETE /{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫—Ü–∏–∏

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ `/api/v1/stocks/{stockId}/comments`
- `GET /` - –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∞–∫—Ü–∏–∏
- `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `PUT /{commentId}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `DELETE /{commentId}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

### –ü–æ—Ä—Ç—Ñ–µ–ª—å `/api/v1/portfolio`
- `GET /` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∞–∫—Ü–∏–π

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ `/api/v1/users`
- `POST /login` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **Repository Pattern** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ `ICommentRepository`, `IStockRepository`
- **DTO –º–∞–ø–ø–∏–Ω–≥** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ DTO –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ `Validators` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (`EntityNotFoundException`, `UpdateCommentException`)
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è User –∏ –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

## üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∞–∫—Ü–∏–π
**–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
- `Offset` - —Å–º–µ—â–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- `Limit` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- `Symbol` - –ø–æ–∏—Å–∫ –ø–æ —Å–∏–º–≤–æ–ª—É (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- `CompanyName` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏
- `MarketCapMin/Max` - –¥–∏–∞–ø–∞–∑–æ–Ω —Ä—ã–Ω–æ—á–Ω–æ–π –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
- `Sort` - –ø–æ–ª—è: `id`, `symbol`, `companyName`, `purchase`, `lastDiv`, `industry`, `marketCap`
- –£–±—ã–≤–∞—é—â–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø—Ä–µ—Ñ–∏–∫—Å `-` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-marketCap`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
``` 
FinShark.API/
‚îú‚îÄ‚îÄ Controllers/     # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ Models/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Dtos/           # Data Transfer Objects
‚îú‚îÄ‚îÄ Repositories/   # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ Services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ Mappers/        # –ú–∞–ø–ø–∏–Ω–≥ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –∏ DTO
‚îú‚îÄ‚îÄ Validators/     # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Exceptions/     # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Data/          # –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Migrations/    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îî‚îÄ‚îÄ Configuration/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
### Lazy Loading –∏ Include
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Include()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `ThenInclude()` –¥–ª—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —Å–≤—è–∑–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å —É—Å–ª–æ–≤–∏—è–º–∏
- –ú–µ—Ç–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `When()` –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å –≤—ã—Ä–∞–∂–µ–Ω–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∞–∫—Ü–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ Entity Framework


## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `[Authorize]` –∞—Ç—Ä–∏–±—É—Ç—ã
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ UserId –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
- Identity framework –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **Swagger** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Docker** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Environment** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env —Ñ–∞–π–ª—ã)
- **Development** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/FateevDev/finshark.git

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
make install
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5064/swagger`
